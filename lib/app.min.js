var App,socket;App=Em.Application.create(),App.Request=Em.Object.extend({client:"ClientName",resource:"ResourceName",timeStamp:"TimeStamp",id:1}),App.requestController=Em.ArrayController.create({content:[],addRequest:function(a){return this.addObject(a)},removeRequest:function(a){return this.removeObject(a)},removeRequestById:function(a){var b,c,d,e,f,g,h,i,j;d=[],i=this.get("content");for(e=0,g=i.length;e<g;e++)b=i[e],b.get("id")===a&&d.push(b);j=[];for(f=0,h=d.length;f<h;f++)c=d[f],j.push(this.removeRequest(c));return j},accept:function(a){return this.removeRequest(a),App.sendApproveRequest(a)},reject:function(a){return this.removeRequest(a),App.sendDenyRequest(a)}}),App.activeRequest=Em.Object.create({content:null,setRequest:function(a){return this.set("content",a)},client:function(){var a;a=this.get("content");if(a)return a.get("client")}.property("content.client"),resource:function(){var a;a=this.get("content");if(a)return a.get("resource")}.property("content.resource"),accept:function(){var a;return console.log("approve from controller"),a=this.get("content"),App.requestController.accept(a)},reject:function(){var a;return console.log("deny from controller"),a=this.get("content"),App.requestController.reject(a)}}),App.requestsView=Em.View.extend({didInsertElement:function(){return $("#requests-listview").listview()}}),App.activeRequestView=Em.View.extend({approve:function(){return console.log("approve")},deny:function(){return console.log("deny")}}),App.RequestView=Em.View.extend({click:function(){var a;return a=this.get("content"),App.activeRequest.setRequest(a)}}),App.ActionButton=Em.View.extend({action:null,tagName:"div",click:function(){this.get("action")==="accept"&&App.activeRequest.accept();if(this.get("action")==="reject")return App.activeRequest.reject()}}),socket=io.connect(),socket.on("approve",function(a){return App.requestController.removeRequestById(a.request_id)}),socket.on("reject",function(a){return App.requestController.removeRequestById(a.request_id)}),App.sendApproveRequest=function(a){return socket.emit("approve",a.get("id"))},App.sendDenyRequest=function(a){return socket.emit("reject",a.get("id"))},$(function(){return App.requestController.addRequest(App.Request.create({id:1})),App.requestController.addRequest(App.Request.create({id:2})),App.requestController.addRequest(App.Request.create({id:3}))})