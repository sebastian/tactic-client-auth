var fs,http,io,libpath,mime,path,port,server,url;http=require("http"),libpath=require("path"),fs=require("fs"),url=require("url"),mime=require("mime"),path=".",port=8088,server=http.createServer(function(a,b){var c,d;return d=url.parse(a.url).pathname,c=libpath.join(path,d),libpath.exists(c,function(a){if(!a){b.writeHead(404,{"Content-Type":"text/plain"}),b.write("404 Not Found\n"),b.end();return}return fs.statSync(c).isDirectory()&&(c+="/index.html"),fs.readFile(c,"binary",function(a,d){var e;if(a){b.writeHead(500,{"Content-Type":"text/plain"}),b.write(a+"\n"),b.end();return}return e=mime.lookup(c),b.writeHead(200,{"Content-Type":e}),b.write(d,"binary"),b.end()})})}).listen(port),io=require("socket.io").listen(server),io.sockets.on("connection",function(a){return a.broadcast.emit("new_user"),a.on("approve",function(b){return console.log("Got approve for "+b),a.broadcast.emit("approve",{request_id:b})}),a.on("reject",function(b){return console.log("Got reject for "+b),a.broadcast.emit("reject",{request_id:b})})})